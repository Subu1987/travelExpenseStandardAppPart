/*
 * Copyright (C) 2009-2022 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define([],function(){"use strict";function g(){var E={Error:"error",Info:"info",Success:"success",Warning:"warning",toMessageType:function(e){switch(e){case E.Info:case sap.ui.core.MessageType.Information:return sap.ui.core.MessageType.Information;case E.Success:case sap.ui.core.MessageType.Success:return sap.ui.core.MessageType.Success;case E.Warning:case sap.ui.core.MessageType.Warning:return sap.ui.core.MessageType.Warning;default:return sap.ui.core.MessageType.Error;}}};function p(e,w){var o;try{o=jQuery.parseJSON(e);if(o&&o.error&&o.error.code&&o.error.code==="SY/530"){o=o.error.innererror.errordetails[0];if(w){return{error:o.message,type:o.severity};}else{return{error:o.message};}}var t=(o.error&&o.error.innererror&&o.error.innererror.errordetails)?o.error.innererror.errordetails[0].severity:E.Error;if(o&&o.error&&o.error.message){if(w){return{error:o.error.message.value,type:t};}else{return{error:o.error.message.value};}}else{return o;}}catch(c){var d=$('<div></div>');d.html(e);if(d&&d.length>0){if(w){return{error:d[0].outerText,type:E.Error};}else{return{error:d[0].outerText};}}}}function P(r,m){var s,S;if(r&&r.headers){if(r.headers["sap-message"]){s=r.headers["sap-message"];try{S=JSON.parse(s);if(S&&S.hasOwnProperty("error")){S=S.error;}}catch(e){jQuery.sap.log.error("sap-message json parse error: "+e);}if(S&&S.message){m.push(new sap.ui.core.message.Message({message:S.message,type:E.toMessageType(S.severity),code:S.code}));}if(S&&S.details&&S.details.length>0){for(var i=0,c=S.details.length;i<c;i++){m.push(new sap.ui.core.message.Message({message:S.details[i].message,type:E.toMessageType(S.details[i].severity),code:S.details[i].code}));}}}else if(r.hasOwnProperty("responseText")){m.push(p(r.responseText,true));}}}function f(r,m){if(r){var B=r.__batchResponses?r.__batchResponses:r.data?r.data.__batchResponses:undefined;if(B&&B.length>0){for(var i=0;i<B.length;i++){if(B[i].hasOwnProperty("response")){_(B[i].response,m);}else if(B[i].hasOwnProperty("__changeResponses")){a(B[i].__changeResponses,m);}else{P(B[i],m);}}}}}function _(r,m){var s;s=r.body;if(s){b(s,m);}}function a(r,m){for(var i=0;i<r.length;i++){P(r[i],m);}}function b(s,m){var S,o={};try{S=JSON.parse(s);}catch(e){jQuery.sap.log.error("sap-message json parse error: "+e);}if(S&&S.error){o.code=S.error.code;o.message=S.error.message.value;o.type=E.toMessageType(E.Error);if(S.error.innererror&&S.error.innererror.errordetails){o=S.error.innererror.errordetails;for(var j=0;j<o.length;j++){m.push(new sap.ui.core.message.Message({message:o[j].hasOwnProperty("message")?o[j].message:o[j].text,type:E.toMessageType(o[j].severity),code:o[j].code}));}}else{m.push(new sap.ui.core.message.Message({message:o.hasOwnProperty("message")?o.message:o.text,type:E.toMessageType(o.severity),code:o.code}));}}}return{ErrorType:E,parseErrorMessage:p,parseMessageResponseHeader:P,parseMessageResponseBatch:f};}return g();},true);
