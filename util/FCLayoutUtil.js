/*
 * Copyright (C) 2009-2022 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["sap/f/FlexibleColumnLayoutSemanticHelper","sap/fin/travel/lib/reuse/util/formatters","sap/fin/travel/lib/reuse/util/ShellUtil","sap/fin/travel/lib/reuse/util/Utils","sap/fin/travel/lib/reuse/util/CustomDataUtil"],function(F,a,S,U,C){"use strict";var _;var l={beginColumn:{level:0,layout:"OneColumn"},midColumn:{level:1,layout:"TwoColumnsMidExpanded",fullLayout:"MidColumnFullScreen"},endColumn:{level:2,layout:"EndColumnFullScreen",fullLayout:"EndColumnFullScreen"},deeperColumn:{level:3,layout:"EndColumnFullScreen"}};function c(f,A,o){var b=f;l.endColumn.layout=o.settings.flexibleColumnLayout.defaultThreeColumnLayoutType;for(var d in o.pages){g(o.pages[d].pages,1);}var e=F.getInstanceFor(b,{defaultTwoColumnLayoutType:o.settings.flexibleColumnLayout.defaultTwoColumnLayoutType,defaultThreeColumnLayoutType:o.settings.flexibleColumnLayout.defaultThreeColumnLayoutType});function g(p,q,E){for(var r in p){var K=r.split("|").pop();var t=E!=undefined?E+"."+K:K;if(p[r].hasOwnProperty("component")&&p[r].component.hasOwnProperty("settings")&&p[r].component.settings.hasOwnProperty("columnLayout")&&q==l.endColumn.level){l[t]={level:q,fullLayout:"EndColumnFullScreen",layout:p[r].component.settings.columnLayout};}else{if(p[r].hasOwnProperty("pages")){g(p[r].pages,q+1,t);}}}}function h(p,L,q){var P=p.split("/"),K;while(P.length>0){var E=P.shift();if(E!=undefined&&E.length>0){K=K==undefined?E.split("(").shift():K+"."+E.split("(").shift();}}if(l.hasOwnProperty(K)){return l[K].layout;}return undefined;}function u(){A.updateGlobalModel("/fcl",e.getCurrentUIState());}function s(p){b.setLayout(p);u();}function i(p,L,q){var r=h(p,L,q);if(r==undefined){if(L===l.beginColumn.level){r=q?l.beginColumn.layout:(e.getCurrentUIState().isFullScreen?l.midColumn.fullLayout:l.midColumn.layout);}else if(L===l.midColumn.level){r=q?l.midColumn.layout:(e.getCurrentUIState().isFullScreen?l.endColumn.fullLayout:l.endColumn.layout);}else if(L===l.endColumn.level){r=(e.getCurrentUIState().isFullScreen?l.endColumn.fullLayout:l.endColumn.layout);}else{r=l.deeperColumn.layout;}}if(!U.isEmptyObjectOrString(r)){A.updateGlobalModel("/app/level",L);s(r);}}function j(L){var p=e.getCurrentUIState().isFullScreen;switch(L){case l.beginColumn.level:break;case l.midColumn.level:s(l.beginColumn.layout);break;case l.endColumn.level:s(p?l.midColumn.fullLayout:l.midColumn.layout);break;default:s(p?l.endColumn.fullLayout:l.endColumn.layout);break;}}function k(p){var q=e.getCurrentUIState();if(p.getModel("view").getProperty("/level")===l.midColumn.level){s(q.actionButtonsInfo.midColumn.fullScreen);}else if(p.getModel("view").getProperty("/level")===l.endColumn.level){s(q.actionButtonsInfo.endColumn.fullScreen);}S.get().setTitle(p,I());}function m(p){var q=e.getCurrentUIState();if(p.getModel("view").getProperty("/level")===l.midColumn.level){s(q.actionButtonsInfo.midColumn.exitFullScreen);}else if(p.getModel("view").getProperty("/level")===l.endColumn.level){s(q.actionButtonsInfo.endColumn.exitFullScreen);}S.get().setTitle(p,I());}function n(L){var p=e.getCurrentUIState();if(L===l.midColumn.level){s(p.actionButtonsInfo.midColumn.closeColumn);}else if(L===l.endColumn.level){s(p.actionButtonsInfo.endColumn.closeColumn);}}function I(){return A.getGlobalModel().getProperty("/fcl").isFullScreen;}function G(){return A.getGlobalModel().getProperty("/fcl").layout;}return{setNavigationLayout:i,setNavigationBackLayout:j,setFullScreenLayout:k,setExitFullScreenLayout:m,setCloseScreenLayout:n,setLayout:s,updateFCLModel:u,isFullScreen:I,getLayout:G};}return{layout:l,get:function(){if(!_){throw new Error("FCLLayout has not been initialized yet.");}return _;},init:function(f,A,o){if(_){this.destroy();}_=c(f,A,o);},destroy:function(){_=null;}};},true);
