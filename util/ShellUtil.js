/*
 * Copyright (C) 2009-2022 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["sap/fin/travel/lib/reuse/util/formatters","sap/fin/travel/lib/reuse/util/i18n"],function(F,I){"use strict";var _;function c(a){function s(o){var l=location.hash;var b=a.getGlobalModel().getProperty("/hierarchy/main").reverse();var h={title:o.oComponentData.oShell&&I.get().resolveText(o.oComponentData.oShell.headerTitle),icon:o.oComponentData.oShell&&o.oComponentData.oShell.typeImageUrl,subtitle:"",intent:l};if(o.getModel("view").getProperty("/level")>b.length){b.push(h);}else if(o.getModel("view").getProperty("/level")<b.length){b.pop();}else{b.pop();b.push(h);}for(var i=0;i<b.length;i++){var L=l.split("/");var d=L.slice(0,L.length-(o.getModel("view").getProperty("/level")-(i+1)));b[i].intent=decodeURI(d.join("/"));}b=b.reverse();a.getShellService().then(function(e){if(e){e.setHierarchy(a.getGlobalModel().getProperty("/hierarchy/main").concat(a.getGlobalModel().getProperty("/hierarchy/app")));}});}function C(){a.getGlobalModel().setProperty("/hierarchy/main",[]);a.getShellService().then(function(o){if(o){o.setHierarchy([]);o.setTitle(I.get().resolveText(a.getGlobalModel().getProperty("/share/appTitle")));}});}function S(o,i){a.getShellService().then(function(b){if(b){b.setTitle(i?I.get().resolveText(o.oComponentData.oShell.headerTitle):I.get().resolveText(a.getGlobalModel().getProperty("/share/appTitle")));}});}function f(){C();}return{setHierarchy:s,clearHierarchy:C,clearShell:f,setTitle:S};}return{get:function(){if(!_){throw new Error("ShellUtil has not been initialized yet.");}return _;},init:function(a){if(_){this.destroy();}_=c(a);},destroy:function(){_=null;}};},true);
